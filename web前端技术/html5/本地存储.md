# 本地存储

在出啊同的web应用中,应该是不该有本地存储的,所有信息应该保存在服务器端的数据库中.但html5允许使用本地存储.本地存储分为以下几种:

## Web Storage(C1/webstorage)

    webstorage 是一个键值对数据存储工具.提供两种类型的API：localStorage和sessionStorage，两者的区别看名字就有大概了解，localStorage在本地永久性存储数据，除非显式将其删除或清空，sessionStorage存储的数据只在会话期间有效，关闭浏览器则自动删除。两个对象都有共同的API。

    从容量上讲WebStorage一般浏览器提供5M的存储空间，用来存储视频、图片神马的不够，但对于绝大部分操作足矣.
    对于不同的网站，数据存储于不同的区域，并且一个网站只能访问其自身的数据。

    api:

    ```ts
    interface Storage {
      readonly attribute unsigned long length;
      DOMString? key(unsigned long index);
      getter DOMString getItem(DOMString key);
      setter creator void setItem(DOMString key, DOMString value);
      deleter void removeItem(DOMString key);
      void clear();
    };
    ```

    1. length:唯一的属性，只读，用来获取storage内的键值对数量。
    2. key：根据index获取storage的键名
    3. getItem：根据key获取storage内的对应value
    4. setItem：为storage内添加键值对
    5. removeItem：根据键名，删除键值对
    6. clear：清空storage对象

    事件:
    ```ts
    interface StorageEvent : Event {
      readonly attribute DOMString key;
      readonly attribute DOMString? oldValue;
      readonly attribute DOMString? newValue;
      readonly attribute DOMString url;
      readonly attribute Storage? storageArea;
    };
    ```

    HTML5规定了一个storage事件，在WebStorage发生变化的时候触发，可以用此监视不同页面对storage的修改

    1. key:键值对的键
    2. oldValue：修改之前的value
    3. newValue：修改之后的value
    4. url：触发改动的页面url
    5. StorageArea：发生改变的Storage

## Indexed DB

    Web Storage使用简单字符串键值对在本地存储数据，方便灵活，但是对于大量结构化数据存储力不从心，IndexedDB是为了能够在客户端存储大量的结构化数据，并且使用索引高效检索的API。标准接口写起来啰嗦,我们可以使用封装好的[Dexie.js](http://dexie.org/)来使用,如果要用typescript,


## websql(未被收录)

    websql是被废弃的一个标准,它使用sqlite的sql方言作为标准,并且可以自定义数据库大小
